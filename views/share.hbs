<!-- Page for sharing tests with groups or specific students -->

<div class="container" id="shareTest">
    <div class="col-md-10 col-md-offset-1">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="title">Dela Test</h1>
            </div>
        </div>
        <hr>
                <!-- Test selection -->
                <form action="/test" method="get">
                    <select name="test" id="testName" class="form-control">
                        {{#each tests}}
                            <option class="{{this.TestId}}">{{this.TTitle}}</option>
                        {{/each}}
                    </select>
                </form>


            <!-- Group/student selection -->
            <select name="share" id="shareSelect" class="form-control">
                <option value="">Dela till grupp/elev</option>
                <option value="group" id="group">Dela till grupp</option>
                <option value="student" id="student">Dela till elev</option>
            </select>
        </form>
    </div>
</div>

<!-- Group selection -->
<div class="container collapse" id="shareGroupContainer">
    <div class="col-md-4 col-md-offset-4">
        <h3 class="page-header">Välj grupp</h3>
        <form action="share" method="post">
            <select name="share" id="shareGroupSelect" class="form-control"></select>
            <br>
            <button type="button" class="btn btn-info btn-block" id="registerButton">Dela till grupp</button>
        </form>
    </div>
</div>

<!-- Student selection -->
<div class="container collapse" id="shareStudentContainer">
    <div class="col-md-4 col-md-offset-4">
        <h3 class="page-header">Välj elev</h3>
        <form action="share" method="post">
            <select name="share" id="shareStudentSelect" class="form-control"></select>
            <br>
            <button type="button" class="btn btn-info btn-block" id="registerButton">Dela till elev</button>
        </form>
    </div>
</div>

<script>
    // Displays sub-selections when group/student selection is made
    $(function() {
        $("#shareSelect").change(function() {
            if ($("#group").is(":selected")) {
                $("#shareGroupContainer").slideDown();
                $("#shareStudentContainer").hide();
            } else if($("#student").is(":selected")){
                $("#shareGroupContainer").hide();
                $("#shareStudentContainer").slideDown();
            } else {
                $("#shareGroupContainer").hide();
                $("#shareStudentContainer").hide();
            }
        });

        //Fills selectors with data from database
        $('#shareGroupSelect').append(`
            {{#studentGroups}}
                <option>{{groupName}}</option>
            {{/studentGroups}}
        `)

        $('#shareStudentSelect').append(`
            {{#students}}
                <option>{{FirstName}}</option>
            {{/students}}
        `)
    });
</script>